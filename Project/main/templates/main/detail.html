{% extends 'main/base.html' %}
{% block content %}
{% load crispy_forms_tags %}

<form action="{% url 'main:vote_down' question.id %}" method='GET'>
    <button type="submit" class="btn btn-danger float-right">Vote Down</button>
</form>
<form action="{% url 'main:vote_up' question.id %}" method='GET'>
    <button class="btn btn-success float-right mr-2">Vote Up</button>
</form>
<div class="float-right mr-3 mt-2">Votes: {{ question.votes }}</div>
<h2>{{ question.question_text }}</h2>
<a class="float-right" href="/profile/{{ question.user.username }}">
    <div class="text-dark mt-2">Posted By: <span class="text-primary">{{ question.user.username }}</span> {{ question.get_date }}</div>
</a>
<legend class="border-bottom"></legend>
<h3 class="w-75 mt-4 mb-5"><small>{{ question.question_subtext }}</small></h3>
<div class="mt-5 mb-5 p-3"></div>
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
{% if request.user.is_authenticated %}
    <h3 class="mt-5 mb-4">{{ question.comment_set.all.count }} Answers:</h3>
    <form method="POST">
        {% csrf_token %}
        <fieldset class="form-group">
            {{ form|crispy }}
        </fieldset>
        <div class="form-group">
            <button class="btn btn-outline-info float-right" type="submit">Answer</button>
        </div>
        <small class="p-3"></small>
    </form>
{% else %}
    <h3 class="mt-5 mb-4">{{ question.comment_set.all.count }} Answers:
        <a class="float-right" href="/login/">
            <small class="text-primary mt-2">Login To Answer</small>
        </a>
    </h3>
{% endif %}
<ul class="mt-5">
    {% for comment in question.comment_set.all %}
    <li class="mt-2 list-group-item-action flex-column align-items-start mb-4">
        <a href="/profile/{{ comment.user.username }}" class="text-primary">{{ comment.user }}</a>: {{ comment.comment_text }} - <span class="text-secondary">{{ comment.get_date }}</span>
    </li>
    {% endfor %}
</ul>
<div class="p-3"></div>
<span class="footer-classes">
    {% block footer-class %} position-absolute w-100 {% endblock %}
</span>
{% endblock %}